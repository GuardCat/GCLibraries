<!DOCTYPE html>
 <html lang="ru" dir="ltr">
 	<head>
 		<meta charset="utf-8">
 		<title>Проверка документов для сделки авто</title>

		<style type="text/css">
			body {
				font-family:		Calibri, Arial;
			}

			li {
				list-style-type:	none;
				margin-top:			10px;
			}

			input {
				margin-left:		-2em;
				margin-right:		1em;
			}

			input:checked + span {
				text-decoration:	line-through;
				color:				silver;
			}



		</style>

 	</head>
 	<body>

		<h2>Проверка комплектности документов</h2>
		<div>В наличии</div>
		<ul>
			<li><label><input type="checkbox"><span>Фотография Клиента</span></input></label></li>
			<li><label><input type="checkbox"><span>Цветной скан паспорта</span></input></label></li>
			<li><label><input type="checkbox"><span>Второй документ</span></input></label></li>
		</ul>

		<h2>Требования к фотографии Клиента</h2>
		<ul>
			<li><label><input type="checkbox"><span>Фотография сделана во время проведения сделки в автосалоне</span></input></label></li>
			<li><label><input type="checkbox"><span>Фотография не засвечена и не затемнена, на фото хорошо виден клиент</span></input></label></li>
			<li><label><input type="checkbox"><span>Фотография чёткая, контуры лица клиента хорошо различимы. Нет размытости, фото не замутнено.</span></input></label></li>
			<li><label><input type="checkbox"><span>Клиент повёрнут к камере лицом, лицо не обрезано (например, видна не только макушка или подбородок)</span></input></label></li>
			<li><label><input type="checkbox"><span>Клиент снят без солнцезащитных очков, без головного убора, аксессуаров, которые закрывают часть лица или искажают внешность</span></input></label></li>
		</ul>


		<script>

			class Checklist {
				constructor (checkboxes, container) {
					this.checkboxes = [...checkboxes];
				}

				check(nums) {
					nums.forEach( num => {
						if (this.checkboxes[num]) this.checkboxes[num].checked = true;
					} );
				}

				reset( ) {
					this.checkboxes.forEach( box => box.checked = false );
				}

				save( ) {
					window.localStorage.setItem("checklist_auto", JSON.stringify(this.checkedNums));
					return true;
				}

				read( ) {
					const savedText = window.localStorage.getItem("checklist_auto");
					if (!savedText) return;
					this.reset( );
					this.check( JSON.parse(savedText) );
				}

				get len( ) {
					return this.checkboxes.length
				}
				get checked( ) {
					return this.checkboxes.filter( box => box.checked );
				}

				get checkedNums( ) {
					let result = [ ];
					this.checkboxes.forEach( (box,i) => {
						if (box.checked) result.push(i)
					});
					return result
				}
			}

			function director( ) {
				const checklist = new Checklist( document.querySelectorAll("input"), document.body )
				window.onunload = checklist.save.bind(checklist); //При вызове события, this — источник события, а не экземпляр объекта
				checklist.read( );
			}

			window.addEventListener("load", director);
		</script>

 	</body>
 </html>
